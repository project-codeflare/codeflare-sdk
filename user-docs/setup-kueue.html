

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Basic Kueue Resources configuration &mdash; CodeFlare SDK 0.31.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=72479337"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Jupyter UI Widgets" href="ui-widgets.html" />
    <link rel="prev" title="S3 compatible storage with Ray Train examples" href="s3-compatible-storage.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            CodeFlare SDK
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Code Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">codeflare_sdk</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Documentation:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication via the CodeFlare SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="cluster-configuration.html">Ray Cluster Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="ray-cluster-interaction.html">Ray Cluster Interaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="e2e.html">Running e2e tests locally</a></li>
<li class="toctree-l1"><a class="reference internal" href="s3-compatible-storage.html">S3 compatible storage with Ray Train examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Basic Kueue Resources configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#resource-flavor">1. Resource Flavor:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cluster-queue">2. Cluster Queue:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#local-queue-with-default-annotation">3. Local Queue (With Default Annotation):</a></li>
<li class="toctree-l2"><a class="reference internal" href="#conclusion">Conclusion:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ui-widgets.html">Jupyter UI Widgets</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CodeFlare SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Basic Kueue Resources configuration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/user-docs/setup-kueue.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="basic-kueue-resources-configuration">
<h1>Basic Kueue Resources configuration<a class="headerlink" href="#basic-kueue-resources-configuration" title="Link to this heading"></a></h1>
<section id="introduction">
<h2>Introduction:<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>This document is designed for administrators who have Kueue installed on
their cluster. We will walk through the process of setting up essential
Kueue resources, namely Cluster Queue, Resource Flavor, and Local Queue.</p>
</section>
<section id="resource-flavor">
<h2>1. Resource Flavor:<a class="headerlink" href="#resource-flavor" title="Link to this heading"></a></h2>
<p>Resource Flavors allow the cluster admin to reflect differing resource capabilities
of nodes within a clusters, such as CPU, memory, GPU, etc. These can then be assigned
to workloads to ensure they are executed on nodes with appropriate resources.</p>
<p>The YAML configuration provided below creates an empty Resource Flavor
named default-flavor. It serves as a starting point and does not specify
any detailed resource characteristics.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kueue.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ResourceFlavor</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default-flavor</span>
</pre></div>
</div>
<p>For more detailed information on Resource Flavor configuration options,
refer to the Kueue documentation: <a class="reference external" href="https://kueue.sigs.k8s.io/docs/concepts/resource_flavor/">Resource Flavor
Configuration</a></p>
</section>
<section id="cluster-queue">
<h2>2. Cluster Queue:<a class="headerlink" href="#cluster-queue" title="Link to this heading"></a></h2>
<p>A Cluster Queue represents a shared queue across the entire cluster. It
allows the cluster admin to define global settings for workload
prioritization and resource allocation.</p>
<p>When setting up a Cluster Queue in Kueue, it’s crucial that the resource
specifications match the actual capacities and operational requirements
of your cluster. The example provided outlines a basic setup; however,
each cluster may have different resource availabilities and needs.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kueue.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterQueue</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cluster-queue&quot;</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespaceSelector</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w"> </span><span class="c1"># match all.</span>
<span class="w">  </span><span class="nt">resourceGroups</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">coveredResources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;cpu&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;memory&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;pods&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;nvidia.com/gpu&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">flavors</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-flavor&quot;</span>
<span class="w">      </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cpu&quot;</span>
<span class="w">        </span><span class="nt">nominalQuota</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;memory&quot;</span>
<span class="w">        </span><span class="nt">nominalQuota</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">36Gi</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pods&quot;</span>
<span class="w">        </span><span class="nt">nominalQuota</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nvidia.com/gpu&quot;</span>
<span class="w">        </span><span class="nt">nominalQuota</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0&#39;</span>
</pre></div>
</div>
<p>For more detailed information on Cluster Queue configuration options,
refer to the Kueue documentation: <a class="reference external" href="https://kueue.sigs.k8s.io/docs/concepts/cluster_queue/">Cluster Queue
Configuration</a></p>
</section>
<section id="local-queue-with-default-annotation">
<h2>3. Local Queue (With Default Annotation):<a class="headerlink" href="#local-queue-with-default-annotation" title="Link to this heading"></a></h2>
<p>A Local Queue represents a queue associated with a specific namespace
within the cluster. It allows namespace-level control over workload
prioritization and resource allocation.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kueue.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LocalQueue</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">team-a</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">team-a-queue</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">kueue.x-k8s.io/default-queue</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">clusterQueue</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster-queue</span>
</pre></div>
</div>
<p>In the LocalQueue configuration provided above, the annotations field
specifies <code class="docutils literal notranslate"><span class="pre">kueue.x-k8s.io/default-queue:</span> <span class="pre">&quot;true&quot;</span></code>. This annotation
indicates that the team-a-queue is designated as the default queue for
the team-a namespace. When this is set, any workloads submitted to the
team-a namespace without explicitly specifying a queue will
automatically be routed to the team-a-queue.</p>
<p>For more detailed information on Local Queue configuration options,
refer to the Kueue documentation: <a class="reference external" href="https://kueue.sigs.k8s.io/docs/concepts/local_queue/">Local Queue
Configuration</a></p>
</section>
<section id="conclusion">
<h2>Conclusion:<a class="headerlink" href="#conclusion" title="Link to this heading"></a></h2>
<p>By following the steps outlined in this document, the cluster admin can
successfully create the basic Kueue resources necessary for workload
management in the cluster. For more advanced configurations and
features, please refer to the comprehensive <a class="reference external" href="https://kueue.sigs.k8s.io/docs/concepts/">Kueue
documentation</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="s3-compatible-storage.html" class="btn btn-neutral float-left" title="S3 compatible storage with Ray Train examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ui-widgets.html" class="btn btn-neutral float-right" title="Jupyter UI Widgets" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Project CodeFlare.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>