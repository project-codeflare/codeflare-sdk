<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>codeflare_sdk.utils.pretty_print API documentation</title>
<meta name="description" content="This sub-module exists primarily to be used internally by the Cluster object
(in the cluster sub-module) for pretty-printing cluster status and details." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>codeflare_sdk.utils.pretty_print</code></h1>
</header>
<section id="section-intro">
<p>This sub-module exists primarily to be used internally by the Cluster object
(in the cluster sub-module) for pretty-printing cluster status and details.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># Copyright 2022 IBM, Red Hat
#
# Licensed under the Apache License, Version 2.0 (the &#34;License&#34;);
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an &#34;AS IS&#34; BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

&#34;&#34;&#34;
This sub-module exists primarily to be used internally by the Cluster object
(in the cluster sub-module) for pretty-printing cluster status and details.
&#34;&#34;&#34;

from rich import print
from rich.table import Table
from rich.console import Console
from rich.layout import Layout
from rich.panel import Panel
from rich import box
from typing import List
from ..cluster.model import RayCluster, AppWrapper, RayClusterStatus


def print_no_resources_found():
    console = Console()
    console.print(Panel(&#34;[red]No resources found, have you run cluster.up() yet?&#34;))


def print_app_wrappers_status(app_wrappers: List[AppWrapper], starting: bool = False):
    if not app_wrappers:
        print_no_resources_found()
        return  # shortcircuit

    console = Console()
    table = Table(
        box=box.ASCII_DOUBLE_HEAD,
        title=&#34;[bold] :rocket: Cluster Queue Status :rocket:&#34;,
    )
    table.add_column(&#34;Name&#34;, style=&#34;cyan&#34;, no_wrap=True)
    table.add_column(&#34;Status&#34;, style=&#34;magenta&#34;)

    for app_wrapper in app_wrappers:
        name = app_wrapper.name
        status = app_wrapper.status.value
        if starting:
            status += &#34; (starting)&#34;
        table.add_row(name, status)
        table.add_row(&#34;&#34;)  # empty row for spacing

    console.print(Panel.fit(table))


def print_cluster_status(cluster: RayCluster):
    &#34;Pretty prints the status of a passed-in cluster&#34;
    if not cluster:
        print_no_resources_found()
        return

    console = Console()
    status = (
        &#34;Active :white_heavy_check_mark:&#34;
        if cluster.status == RayClusterStatus.READY
        else &#34;Inactive :x:&#34;
    )
    name = cluster.name
    dashboard = cluster.dashboard
    # owned = bool(cluster[&#34;userOwned&#34;])
    owned = True

    #&#39;table0&#39; to display the cluster name, status, url, and dashboard link
    table0 = Table(box=None, show_header=False)
    if owned:
        table0.add_row(&#34;[white on green][bold]Name&#34;)
    else:
        table0.add_row(&#34;&#34;)
    table0.add_row(&#34;[bold underline]&#34; + name, status)
    table0.add_row()
    # fixme harcded to default for now
    table0.add_row(
        f&#34;[bold]URI:[/bold] ray://{cluster.name}-head-svc.{cluster.namespace}.svc:10001&#34;
    )  # format that is used to generate the name of the service
    table0.add_row()
    table0.add_row(f&#34;[link={dashboard} blue underline]Dashboard:link:[/link]&#34;)
    table0.add_row(&#34;&#34;)  # empty row for spacing

    # table4 to display table0 and table3, one below the other
    table4 = Table(box=None, show_header=False)
    table4.add_row(table0)

    # Encompass all details of the cluster in a single panel
    table5 = Table(box=None, title=&#34;[bold] :rocket: CodeFlare Cluster Status :rocket:&#34;)
    table5.add_row(Panel.fit(table4))
    console.print(table5)


def print_clusters(clusters: List[RayCluster]):
    if not clusters:
        print_no_resources_found()
        return  # shortcircuit

    console = Console()
    title_printed = False

    for cluster in clusters:
        status = (
            &#34;Active :white_heavy_check_mark:&#34;
            if cluster.status == RayClusterStatus.READY
            else &#34;Inactive :x:&#34;
        )
        name = cluster.name
        dashboard = cluster.dashboard
        mincount = str(cluster.min_workers)
        maxcount = str(cluster.max_workers)
        memory = str(cluster.worker_mem_min) + &#34;~&#34; + str(cluster.worker_mem_max)
        cpu = str(cluster.worker_cpu)
        gpu = str(cluster.worker_gpu)
        # owned = bool(cluster[&#34;userOwned&#34;])
        owned = True

        #&#39;table0&#39; to display the cluster name, status, url, and dashboard link
        table0 = Table(box=None, show_header=False)
        if owned:
            table0.add_row(&#34;[white on green][bold]Name&#34;)
        else:
            table0.add_row(&#34;&#34;)
        table0.add_row(&#34;[bold underline]&#34; + name, status)
        table0.add_row()
        # fixme harcded to default for now
        table0.add_row(
            f&#34;[bold]URI:[/bold] ray://{cluster.name}-head-svc.{cluster.namespace}.svc:10001&#34;
        )  # format that is used to generate the name of the service
        table0.add_row()
        table0.add_row(f&#34;[link={dashboard} blue underline]Dashboard:link:[/link]&#34;)
        table0.add_row(&#34;&#34;)  # empty row for spacing

        #&#39;table1&#39; to display the worker counts
        table1 = Table(box=None)
        table1.add_row()
        table1.add_column(&#34;Min&#34;, style=&#34;cyan&#34;, no_wrap=True)
        table1.add_column(&#34;Max&#34;, style=&#34;magenta&#34;)
        table1.add_row()
        table1.add_row(mincount, maxcount)
        table1.add_row()

        #&#39;table2&#39; to display the worker resources
        table2 = Table(box=None)
        table2.add_column(&#34;Memory&#34;, style=&#34;cyan&#34;, no_wrap=True, min_width=10)
        table2.add_column(&#34;CPU&#34;, style=&#34;magenta&#34;, min_width=10)
        table2.add_column(&#34;GPU&#34;, style=&#34;magenta&#34;, min_width=10)
        table2.add_row()
        table2.add_row(memory, cpu, gpu)
        table2.add_row()

        # panels to encompass table1 and table2 into separate cards
        panel_1 = Panel.fit(table1, title=&#34;Workers&#34;)
        panel_2 = Panel.fit(table2, title=&#34;Worker specs(each)&#34;)

        # table3 to display panel_1 and panel_2 side-by-side in a single row
        table3 = Table(box=None, show_header=False, title=&#34;Cluster Resources&#34;)
        table3.add_row(panel_1, panel_2)

        # table4 to display table0 and table3, one below the other
        table4 = Table(box=None, show_header=False)
        table4.add_row(table0)
        table4.add_row(table3)

        # Encompass all details of the cluster in a single panel
        if not title_printed:
            # If first cluster in the list, then create a table with title &#34;Codeflare clusters&#34;.
            # This is done to ensure the title is center aligned on the cluster display tables, rather
            # than being center aligned on the console/terminal if we simply use console.print(title)

            table5 = Table(
                box=None, title=&#34;[bold] :rocket: CodeFlare Cluster Details :rocket:&#34;
            )
            table5.add_row(Panel.fit(table4))
            console.print(table5)
            title_printed = True
        else:
            console.print(Panel.fit(table4))</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="codeflare_sdk.utils.pretty_print.print_app_wrappers_status"><code class="name flex">
<span>def <span class="ident">print_app_wrappers_status</span></span>(<span>app_wrappers: List[<a title="codeflare_sdk.cluster.model.AppWrapper" href="../cluster/model.html#codeflare_sdk.cluster.model.AppWrapper">AppWrapper</a>], starting: bool = False)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def print_app_wrappers_status(app_wrappers: List[AppWrapper], starting: bool = False):
    if not app_wrappers:
        print_no_resources_found()
        return  # shortcircuit

    console = Console()
    table = Table(
        box=box.ASCII_DOUBLE_HEAD,
        title=&#34;[bold] :rocket: Cluster Queue Status :rocket:&#34;,
    )
    table.add_column(&#34;Name&#34;, style=&#34;cyan&#34;, no_wrap=True)
    table.add_column(&#34;Status&#34;, style=&#34;magenta&#34;)

    for app_wrapper in app_wrappers:
        name = app_wrapper.name
        status = app_wrapper.status.value
        if starting:
            status += &#34; (starting)&#34;
        table.add_row(name, status)
        table.add_row(&#34;&#34;)  # empty row for spacing

    console.print(Panel.fit(table))</code></pre>
</details>
</dd>
<dt id="codeflare_sdk.utils.pretty_print.print_cluster_status"><code class="name flex">
<span>def <span class="ident">print_cluster_status</span></span>(<span>cluster: <a title="codeflare_sdk.cluster.model.RayCluster" href="../cluster/model.html#codeflare_sdk.cluster.model.RayCluster">RayCluster</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>Pretty prints the status of a passed-in cluster</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def print_cluster_status(cluster: RayCluster):
    &#34;Pretty prints the status of a passed-in cluster&#34;
    if not cluster:
        print_no_resources_found()
        return

    console = Console()
    status = (
        &#34;Active :white_heavy_check_mark:&#34;
        if cluster.status == RayClusterStatus.READY
        else &#34;Inactive :x:&#34;
    )
    name = cluster.name
    dashboard = cluster.dashboard
    # owned = bool(cluster[&#34;userOwned&#34;])
    owned = True

    #&#39;table0&#39; to display the cluster name, status, url, and dashboard link
    table0 = Table(box=None, show_header=False)
    if owned:
        table0.add_row(&#34;[white on green][bold]Name&#34;)
    else:
        table0.add_row(&#34;&#34;)
    table0.add_row(&#34;[bold underline]&#34; + name, status)
    table0.add_row()
    # fixme harcded to default for now
    table0.add_row(
        f&#34;[bold]URI:[/bold] ray://{cluster.name}-head-svc.{cluster.namespace}.svc:10001&#34;
    )  # format that is used to generate the name of the service
    table0.add_row()
    table0.add_row(f&#34;[link={dashboard} blue underline]Dashboard:link:[/link]&#34;)
    table0.add_row(&#34;&#34;)  # empty row for spacing

    # table4 to display table0 and table3, one below the other
    table4 = Table(box=None, show_header=False)
    table4.add_row(table0)

    # Encompass all details of the cluster in a single panel
    table5 = Table(box=None, title=&#34;[bold] :rocket: CodeFlare Cluster Status :rocket:&#34;)
    table5.add_row(Panel.fit(table4))
    console.print(table5)</code></pre>
</details>
</dd>
<dt id="codeflare_sdk.utils.pretty_print.print_clusters"><code class="name flex">
<span>def <span class="ident">print_clusters</span></span>(<span>clusters: List[<a title="codeflare_sdk.cluster.model.RayCluster" href="../cluster/model.html#codeflare_sdk.cluster.model.RayCluster">RayCluster</a>])</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def print_clusters(clusters: List[RayCluster]):
    if not clusters:
        print_no_resources_found()
        return  # shortcircuit

    console = Console()
    title_printed = False

    for cluster in clusters:
        status = (
            &#34;Active :white_heavy_check_mark:&#34;
            if cluster.status == RayClusterStatus.READY
            else &#34;Inactive :x:&#34;
        )
        name = cluster.name
        dashboard = cluster.dashboard
        mincount = str(cluster.min_workers)
        maxcount = str(cluster.max_workers)
        memory = str(cluster.worker_mem_min) + &#34;~&#34; + str(cluster.worker_mem_max)
        cpu = str(cluster.worker_cpu)
        gpu = str(cluster.worker_gpu)
        # owned = bool(cluster[&#34;userOwned&#34;])
        owned = True

        #&#39;table0&#39; to display the cluster name, status, url, and dashboard link
        table0 = Table(box=None, show_header=False)
        if owned:
            table0.add_row(&#34;[white on green][bold]Name&#34;)
        else:
            table0.add_row(&#34;&#34;)
        table0.add_row(&#34;[bold underline]&#34; + name, status)
        table0.add_row()
        # fixme harcded to default for now
        table0.add_row(
            f&#34;[bold]URI:[/bold] ray://{cluster.name}-head-svc.{cluster.namespace}.svc:10001&#34;
        )  # format that is used to generate the name of the service
        table0.add_row()
        table0.add_row(f&#34;[link={dashboard} blue underline]Dashboard:link:[/link]&#34;)
        table0.add_row(&#34;&#34;)  # empty row for spacing

        #&#39;table1&#39; to display the worker counts
        table1 = Table(box=None)
        table1.add_row()
        table1.add_column(&#34;Min&#34;, style=&#34;cyan&#34;, no_wrap=True)
        table1.add_column(&#34;Max&#34;, style=&#34;magenta&#34;)
        table1.add_row()
        table1.add_row(mincount, maxcount)
        table1.add_row()

        #&#39;table2&#39; to display the worker resources
        table2 = Table(box=None)
        table2.add_column(&#34;Memory&#34;, style=&#34;cyan&#34;, no_wrap=True, min_width=10)
        table2.add_column(&#34;CPU&#34;, style=&#34;magenta&#34;, min_width=10)
        table2.add_column(&#34;GPU&#34;, style=&#34;magenta&#34;, min_width=10)
        table2.add_row()
        table2.add_row(memory, cpu, gpu)
        table2.add_row()

        # panels to encompass table1 and table2 into separate cards
        panel_1 = Panel.fit(table1, title=&#34;Workers&#34;)
        panel_2 = Panel.fit(table2, title=&#34;Worker specs(each)&#34;)

        # table3 to display panel_1 and panel_2 side-by-side in a single row
        table3 = Table(box=None, show_header=False, title=&#34;Cluster Resources&#34;)
        table3.add_row(panel_1, panel_2)

        # table4 to display table0 and table3, one below the other
        table4 = Table(box=None, show_header=False)
        table4.add_row(table0)
        table4.add_row(table3)

        # Encompass all details of the cluster in a single panel
        if not title_printed:
            # If first cluster in the list, then create a table with title &#34;Codeflare clusters&#34;.
            # This is done to ensure the title is center aligned on the cluster display tables, rather
            # than being center aligned on the console/terminal if we simply use console.print(title)

            table5 = Table(
                box=None, title=&#34;[bold] :rocket: CodeFlare Cluster Details :rocket:&#34;
            )
            table5.add_row(Panel.fit(table4))
            console.print(table5)
            title_printed = True
        else:
            console.print(Panel.fit(table4))</code></pre>
</details>
</dd>
<dt id="codeflare_sdk.utils.pretty_print.print_no_resources_found"><code class="name flex">
<span>def <span class="ident">print_no_resources_found</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def print_no_resources_found():
    console = Console()
    console.print(Panel(&#34;[red]No resources found, have you run cluster.up() yet?&#34;))</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="codeflare_sdk.utils" href="index.html">codeflare_sdk.utils</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="codeflare_sdk.utils.pretty_print.print_app_wrappers_status" href="#codeflare_sdk.utils.pretty_print.print_app_wrappers_status">print_app_wrappers_status</a></code></li>
<li><code><a title="codeflare_sdk.utils.pretty_print.print_cluster_status" href="#codeflare_sdk.utils.pretty_print.print_cluster_status">print_cluster_status</a></code></li>
<li><code><a title="codeflare_sdk.utils.pretty_print.print_clusters" href="#codeflare_sdk.utils.pretty_print.print_clusters">print_clusters</a></code></li>
<li><code><a title="codeflare_sdk.utils.pretty_print.print_no_resources_found" href="#codeflare_sdk.utils.pretty_print.print_no_resources_found">print_no_resources_found</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>